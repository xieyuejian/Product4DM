Ext.define("Ext.srm.window.BidSelectWin",{extend:"Ext.ux.Window",alias:"BidSelectWin",constructor:function(D){var D=D||{};var E=false!==D.singleSelect;var F=this.createGrid(D,E);D=Ext.apply({title:$("bidList"),layout:"border",width:750,height:400,items:[F],renderTo:D.renderTo,constrain:true,listeners:{"hide":function(){F.getSelectionModel().clearSelections()}}},D);this.callParent([D]);if(Ext.isFunction(D.select)){this.on("select",D.select)}},createGrid:function(G,E){var F=this;var H=this.gridPanel=Ext.create("Ext.ux.grid.GridPanel",{border:true,sm:{singleSelect:E},viewConfig:{forceFit:true,stripeRows:true},store:{url:path_srment+"/bd/bid/Bid_getJson.action",baseParams:G.baseParams||{}},cm:{defaultSortable:false,columns:[{Qheader:"id",header:$("bid.bidId"),dataIndex:"bidId",disabled:true},{Qheader:"立项单id",header:$("bid.projectId"),dataIndex:"projectId",disabled:true},{Qheader:"招标单单号",header:$("bid.bidNo"),dataIndex:"bidNo"},{Qheader:"项目名称",header:$("bid.projectName"),dataIndex:"projectName"},{Qheader:"项目号",header:$("bid.projectCode"),dataIndex:"projectCode",disabled:true},{Qheader:"招标单状态",header:$("bid.status"),dataIndex:"status.billStatusName"},{Qheader:"公司编码",header:$("label.companyCode"),dataIndex:"companyCode",disabled:true},{Qheader:"公司名称",header:$("label.companyName"),dataIndex:"companyName",disabled:true},{Qheader:"采购组织编码",header:$("bid.purchasingOrgCode"),dataIndex:"purchasingOrgCode"},{Qheader:"采购组织名称",header:$("bid.purchasingOrgName"),dataIndex:"purchasingOrgName"},{Qheader:"物料组编码",header:$("bid.materialGroupCode"),dataIndex:"materialGroupCode"},{Qheader:"物料组名称",header:$("bid.materialGroupName"),dataIndex:"materialGroupName"},{Qheader:"采购组编码",header:$("bid.purchasingGroupCode"),dataIndex:"purchasingGroupCode",disabled:true},{Qheader:"采购组名称",header:$("bid.purchasingGroupName"),dataIndex:"purchasingGroupName",disabled:true},{Qheader:"投标轮数",header:$("bid.round"),dataIndex:"round",disabled:true},{Qheader:"信息记录类别编码",header:$("bid.infoRecordCategoryCode"),dataIndex:"infoRecordCategoryCode"},{Qheader:"信息记录类别名称",header:$("bid.infoRecordCategoryName"),dataIndex:"infoRecordCategoryName"},{Qheader:"备注说明",header:$("bid.remark"),dataIndex:"remark",disabled:true},{Qheader:"保证金金额",header:$("bid.bondAmount"),dataIndex:"bondAmount"},{Qheader:"货币编码",header:$("bid.currencyCode"),dataIndex:"currencyCode",disabled:true},{Qheader:"货币名称",header:$("bid.currencyName"),dataIndex:"currencyName",disabled:true},{Qheader:"保证金缴纳账户",header:$("bid.margiaAccount"),dataIndex:"margiaAccount",disabled:true},{Qheader:"缴纳开始日期",header:$("bid.bondStartDate"),dataIndex:"bondStartDate",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"缴纳截止日期",header:$("bid.bondEndDate"),dataIndex:"bondEndDate",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{Qheader:"保证金备注",header:$("bid.bondRemark"),dataIndex:"bondRemark"},{Qheader:"报价次数",header:$("bid.quotationTimes"),dataIndex:"quotationTimes",disabled:true},{Qheader:"开标方式名称",header:$("bid.bidOpenModeName"),dataIndex:"bidOpenModeName",disabled:true},{Qheader:"开标方式编码",header:$("bid.bidOpenModeCode"),dataIndex:"bidOpenModeCode",disabled:true},{Qheader:"招标类型编码",header:$("bid.bidTypeCode"),dataIndex:"bidTypeCode",disabled:true},{Qheader:"招标类型名称",header:$("bid.bidTypeName"),dataIndex:"bidTypeName",disabled:true},{Qheader:"招标方式编码",header:$("bid.bidMethodCode"),dataIndex:"bidMethodCode",disabled:true},{Qheader:"招标方式名称",header:$("bid.bidMethodName"),dataIndex:"bidMethodName",disabled:true},{Qheader:"付款方式编码",header:$("bid.payMentCode"),dataIndex:"payMentCode",disabled:true},{Qheader:"付款方式名称",header:$("bid.payMentName"),dataIndex:"payMentName",disabled:true},{Qheader:"付款条件说明",header:$("bid.payMentTerms"),dataIndex:"payMentTerms",disabled:true},{Qheader:"支付类型编码",header:$("bid.payTpeyCode"),dataIndex:"payTpeyCode",disabled:true},{Qheader:"支付类型名称",header:$("bid.payTpeyName"),dataIndex:"payTpeyName",disabled:true},{Qheader:"税率代码",header:$("bid.taxCode"),dataIndex:"taxCode",disabled:true},{Qheader:"税率值",header:$("bid.taxRate"),dataIndex:"taxRate",disabled:true},{Qheader:"税率名称",header:$("bid.taxName"),dataIndex:"taxName",disabled:true},{Qheader:"显示最低价",header:$("bid.showLowestPrice"),dataIndex:"showLowestPrice",disabled:true},{Qheader:"显示排名",header:$("bid.showRanking"),dataIndex:"showRanking",disabled:true},{Qheader:"生成评标单1是；0否",header:$("bid.isEvalFlag"),dataIndex:"isEvalFlag",disabled:true},{Qheader:"价格生效日期",header:$("bid.priceEffectiveDate"),dataIndex:"priceEffectiveDate",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"价格失效日期",header:$("bid.priceExpirationDate"),dataIndex:"priceExpirationDate",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"最小投标供应商数",header:$("bid.minVendorNum"),dataIndex:"minVendorNum",disabled:true},{Qheader:"项目负责人电话",header:$("bid.projectPersonTel"),dataIndex:"projectPersonTel",disabled:true},{Qheader:"项目负责人传真",header:$("bid.projectPersonFax"),dataIndex:"projectPersonFax",disabled:true},{Qheader:"项目负责人邮件",header:$("bid.projectPersonEmail"),dataIndex:"projectPersonEmail",disabled:true},{Qheader:"取消原因",header:$("bid.cancelReason"),dataIndex:"cancelReason",disabled:true},{Qheader:"招标模版类型编码",header:$("bid.bidModelTypeCode"),dataIndex:"bidModelTypeCode",disabled:true},{Qheader:"招标模版类型名称",header:$("bid.bidModeTypeName"),dataIndex:"bidModeTypeName",disabled:true},{Qheader:"评标专家人数",header:$("bid.evalExpertsNum"),dataIndex:"evalExpertsNum",disabled:true},{Qheader:"专家选取开始时间",header:$("bid.evalStateTime"),dataIndex:"evalStateTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"专家选取结束时间",header:$("bid.evalEndTime"),dataIndex:"evalEndTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"解密时长(分钟)",header:$("bid.decrypMinute"),dataIndex:"decrypMinute"},{Qheader:"解密开始时间",header:$("bid.decrypStateTime"),dataIndex:"decrypStateTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"解密截止时间",header:$("bid.decrypEndTime"),dataIndex:"decrypEndTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"发布时间",header:$("bid.publishTime"),dataIndex:"publishTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"附件",header:$("bid.uploadFileGroupId"),dataIndex:"uploadFileGroupId",disabled:true},{Qheader:"计划开标时间",header:$("bid.popenTime"),dataIndex:"popenTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{Qheader:"实际开标时间",header:$("bid.openTime"),dataIndex:"openTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{Qheader:"拟招标时间",header:$("bid.pbidCreateTime"),dataIndex:"pbidCreateTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"招标完成时间",header:$("bid.closeTime"),dataIndex:"closeTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"招标开始时间",header:$("bid.bidStartTime"),dataIndex:"bidStartTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s"),disabled:true},{Qheader:"招标截止时间",header:$("bid.bidEndTime"),dataIndex:"bidEndTime",type:"date",dateFormat:"Y-m-d H:i:s",renderer:Ext.util.Format.dateRenderer("Y-m-d H:i:s")},{Qheader:"创建时间",header:$("label.createTime"),dataIndex:"createTime",disabled:true},{Qheader:"创建人",header:$("label.createUserId"),dataIndex:"createUserId",disabled:true},{Qheader:"创建人名称",header:$("label.createUserName"),dataIndex:"createUserName",disabled:true},{Qheader:"创建人编码",header:$("bid.createUserCode"),dataIndex:"createUserCode",disabled:true},{Qheader:"修改时间",header:$("label.modifyTime"),dataIndex:"modifyTime",disabled:true},{Qheader:"修改人",header:$("label.modifyUserId"),dataIndex:"modifyUserId",disabled:true},{Qheader:"修改人名称",header:$("label.modifyUserName"),dataIndex:"modifyUserName",disabled:true},{Qheader:"修改人编码",header:$("bid.modifyUserCode"),dataIndex:"modifyUserCode",disabled:true},{Qheader:"其他动态列",header:$("bid.ternds"),dataIndex:"ternds",disabled:true}]},tbar:[{text:$("button.select"),iconCls:"icon-save",handler:function(C){var B=H.doSelect(F,E);if(B){var A=H.getStore();C.ownerCt.find("name","bidNo")[0].setValue("");C.ownerCt.find("name","projectName")[0].setValue("");A.proxy.extraParams.filter_LIKE_bidNo="";A.proxy.extraParams.filter_LIKE_projectName="";A.load({params:{start:0,limit:20}});F.hide()}}},{text:$("button.return"),iconCls:"icon-return",handler:function(B){var A=H.getStore();B.ownerCt.find("name","bidNo")[0].setValue("");B.ownerCt.find("name","projectName")[0].setValue("");A.proxy.extraParams.filter_LIKE_bidNo="";A.proxy.extraParams.filter_LIKE_projectName="";A.load({params:{start:0,limit:20}});F.hide()}},"->",{xtype:"label",text:$("bid.bidNo")},{name:"bidNo",xtype:"textfield",width:100},"-",{xtype:"label",text:$("bid.projectName")},{name:"projectName",xtype:"textfield",width:100},{text:$("button.search"),iconCls:"icon-search",handler:function(C){var A=H.getStore();var B=C.ownerCt.find("name","bidNo")[0].getValue();var D=C.ownerCt.find("name","projectName")[0].getValue();A.proxy.extraParams.filter_LIKE_bidNo=B;A.proxy.extraParams.filter_LIKE_projectName=D;A.load({params:{start:0,limit:20}})}}],listeners:{"rowdblclick":function(C,A){if(H.doSelect(F,E)){var B=H.getStore();B.proxy.extraParams.filter_LIKE_bidNo="";B.proxy.extraParams.filter_LIKE_projectName="";B.load({params:{start:0,limit:20}});F.hide()}}},doSelect:function(B,C){var A=this,J=A.getSelectionModel(),D=J.getSelection();if(D.length<1){Q.tips($("message.pleaseSelect"),"E");return false}if(C){B.fireEvent("select",A,D[0])}else{B.fireEvent("select",A,D)}Q.tips($("message.selectSuccess"));return true}});return H}});